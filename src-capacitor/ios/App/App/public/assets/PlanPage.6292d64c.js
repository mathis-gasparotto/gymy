import{d as $,q as X,h as u,T as be,bt as ke,aJ as ee,ds as fe,aS as ye,du as We,aT as pe,z as M,dY as ve,dw as _e,f as L,m as F,j as xe,aI as O,X as K,a1 as te,d7 as Ie,g as Le,R as j,a6 as Se,a as ae,dZ as Te,dW as V,d_ as qe,r as z,o as y,K as S,b as o,Y as f,aP as Y,aQ as J,w as i,aN as T,c as A,V as p,a0 as D,S as C,U as Ce,M as P,Z as H,L as Pe,O as we,N as De,$ as Ae,d$ as Qe}from"./index.1d7fae07.js";import{Q as Ee}from"./QForm.aefa9904.js";import{a as Be,Q as N}from"./QItemSection.74797b3c.js";import{Q as Z}from"./QItemLabel.3064b917.js";import{C as Fe}from"./ClosePopup.e58e1c04.js";import{G as Ve}from"./GymyHeader.dde444e5.js";import{e as Q}from"./notifyHelper.ce085942.js";import{d as He}from"./vuedraggable.umd.56e4a49c.js";import"./_commonjsHelpers.2cf1d77b.js";var Ne=$({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:W}){let m=!1,r,s,d=null,h=null,n,c;function g(){r&&r(),r=null,m=!1,d!==null&&(clearTimeout(d),d=null),h!==null&&(clearTimeout(h),h=null),s!==void 0&&s.removeEventListener("transitionend",n),n=null}function b(l,k,_){k!==void 0&&(l.style.height=`${k}px`),l.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,m=!0,r=_}function v(l,k){l.style.overflowY=null,l.style.height=null,l.style.transition=null,g(),k!==c&&W(k)}function E(l,k){let _=0;s=l,m===!0?(g(),_=l.offsetHeight===l.scrollHeight?0:void 0):(c="hide",l.style.overflowY="hidden"),b(l,_,k),d=setTimeout(()=>{d=null,l.style.height=`${l.scrollHeight}px`,n=x=>{h=null,(Object(x)!==x||x.target===l)&&v(l,"show")},l.addEventListener("transitionend",n),h=setTimeout(n,e.duration*1.1)},100)}function B(l,k){let _;s=l,m===!0?g():(c="show",l.style.overflowY="hidden",_=l.scrollHeight),b(l,_,k),d=setTimeout(()=>{d=null,l.style.height=0,n=x=>{h=null,(Object(x)!==x||x.target===l)&&v(l,"hide")},l.addEventListener("transitionend",n),h=setTimeout(n,e.duration*1.1)},100)}return X(()=>{m===!0&&g()}),()=>u(be,{css:!1,appear:e.appear,onEnter:E,onLeave:B},t.default)}});const q=ke({}),Oe=Object.keys(ee);var je=$({name:"QExpansionItem",props:{...ee,...fe,...ye,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...We,"click","afterShow","afterHide"],setup(e,{slots:t,emit:W}){const{proxy:{$q:m}}=xe(),r=pe(e,m),s=M(e.modelValue!==null?e.modelValue:e.defaultOpened),d=M(null),h=ve(),{show:n,hide:c,toggle:g}=_e({showing:s});let b,v;const E=L(()=>`q-expansion-item q-item-type q-expansion-item--${s.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),B=L(()=>{if(e.contentInsetLevel===void 0)return null;const a=m.lang.rtl===!0?"Right":"Left";return{["padding"+a]:e.contentInsetLevel*56+"px"}}),l=L(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),k=L(()=>{const a={};return Oe.forEach(I=>{a[I]=e[I]}),a}),_=L(()=>l.value===!0||e.expandIconToggle!==!0),x=L(()=>e.expandedIcon!==void 0&&s.value===!0?e.expandedIcon:e.expandIcon||m.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),le=L(()=>e.disable!==!0&&(l.value===!0||e.expandIconToggle===!0)),ne=L(()=>({expanded:s.value===!0,detailsId:h.value,toggle:g,show:n,hide:c})),R=L(()=>{const a=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:m.lang.label[s.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":s.value===!0?"true":"false","aria-controls":h.value,"aria-label":a}});F(()=>e.group,a=>{v!==void 0&&v(),a!==void 0&&G()});function oe(a){l.value!==!0&&g(a),W("click",a)}function se(a){a.keyCode===13&&U(a,!0)}function U(a,I){I!==!0&&d.value!==null&&d.value.focus(),g(a),Se(a)}function re(){W("afterShow")}function ie(){W("afterHide")}function G(){b===void 0&&(b=O()),s.value===!0&&(q[e.group]=b);const a=F(s,w=>{w===!0?q[e.group]=b:q[e.group]===b&&delete q[e.group]}),I=F(()=>q[e.group],(w,ge)=>{ge===b&&w!==void 0&&w!==b&&c()});v=()=>{a(),I(),q[e.group]===b&&delete q[e.group],v=void 0}}function ue(){const a={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},I=[u(j,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&s.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:x.value})];return le.value===!0&&(Object.assign(a,{tabindex:0,...R.value,onClick:U,onKeyup:se}),I.unshift(u("div",{ref:d,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),u(N,a,()=>I)}function de(){let a;return t.header!==void 0?a=[].concat(t.header(ne.value)):(a=[u(N,()=>[u(Z,{lines:e.labelLines},()=>e.label||""),e.caption?u(Z,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&a[e.switchToggleSide===!0?"push":"unshift"](u(N,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>u(j,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&a[e.switchToggleSide===!0?"unshift":"push"](ue()),a}function ce(){const a={ref:"item",style:e.headerStyle,class:e.headerClass,dark:r.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return _.value===!0&&(a.clickable=!0,a.onClick=oe,Object.assign(a,l.value===!0?k.value:R.value)),u(Be,a,de)}function he(){return te(u("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:B.value,id:h.value},Le(t.default)),[[Ie,s.value]])}function me(){const a=[ce(),u(Ne,{duration:e.duration,onShow:re,onHide:ie},he)];return e.expandSeparator===!0&&a.push(u(K,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:r.value}),u(K,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:r.value})),a}return e.group!==void 0&&G(),X(()=>{v!==void 0&&v()}),()=>u("div",{class:E.value},[u("div",{class:"q-expansion-item__container relative-position"},me())])}});const ze={name:"PlanWorkouts",props:{plan:{type:Object,required:!0}},components:{GymyHeader:Ve,draggable:He},data(){return{drag:!1,workouts:{},addForm:!1,addLoading:!1,editForm:!1,editLoading:!1,workoutToEdit:{},planWorkouts:[],showAddPlan:!1,indexToAddWorkout:null,customWorkout:{label:""},customWorkoutFormLoading:!1,showCustomWorkoutForm:!1}},created(){this.workouts=Te(),this.loadPlanWorkouts()},computed:{customWorkoutFormValid(){return this.customWorkout.label.trim().length>2}},methods:{submitCustomWorkout(){this.selectWorkout(this.customWorkout)},showAddPlanFunction(e){this.indexToAddWorkout=e,this.showAddPlan=!0},getDayByIndex(e){switch(e){case 0:return"Lundi";case 1:return"Mardi";case 2:return"Mercredi";case 3:return"Jeudi";case 4:return"Vendredi";case 5:return"Samedi";case 6:return"Dimanche"}},onDragEnd(e){this.drag=!1,V(this.plan.id,{mondayWorkoutId:this.planWorkouts[0].restDay?null:this.planWorkouts[0].id||null,mondayWorkoutLabel:this.planWorkouts[0].restDay||this.planWorkouts[0].id?null:this.planWorkouts[0].label,tuesdayWorkoutId:this.planWorkouts[1].restDay?null:this.planWorkouts[1].id||null,tuesdayWorkoutLabel:this.planWorkouts[1].restDay||this.planWorkouts[1].id?null:this.planWorkouts[1].label,wednesdayWorkoutId:this.planWorkouts[2].restDay?null:this.planWorkouts[2].id||null,wednesdayWorkoutLabel:this.planWorkouts[2].restDay||this.planWorkouts[2].id?null:this.planWorkouts[2].label,thursdayWorkoutId:this.planWorkouts[3].restDay?null:this.planWorkouts[3].id||null,thursdayWorkoutLabel:this.planWorkouts[3].restDay||this.planWorkouts[3].id?null:this.planWorkouts[3].label,fridayWorkoutId:this.planWorkouts[4].restDay?null:this.planWorkouts[4].id||null,fridayWorkoutLabel:this.planWorkouts[4].restDay||this.planWorkouts[4].id?null:this.planWorkouts[4].label,saturdayWorkoutId:this.planWorkouts[5].restDay?null:this.planWorkouts[5].id||null,saturdayWorkoutLabel:this.planWorkouts[5].restDay||this.planWorkouts[5].id?null:this.planWorkouts[5].label,sundayWorkoutId:this.planWorkouts[6].restDay?null:this.planWorkouts[6].id||null,sundayWorkoutLabel:this.planWorkouts[6].restDay||this.planWorkouts[6].id?null:this.planWorkouts[6].label}).catch(t=>{Q("Une erreur est survenue lors du d\xE9placement de votre entra\xEEnement"),this.loadPlanWorkouts()})},loadPlanWorkouts(){this.planWorkouts=qe(this.plan.id),this.planWorkouts=this.planWorkouts.map(e=>e?{...e,idForList:O()}:{idForList:O(),restDay:!0,label:"Repos"})},remove(e){let t={};switch(e){case 0:t={mondayWorkoutId:null,mondayWorkoutLabel:null};break;case 1:t={tuesdayWorkoutId:null,tuesdayWorkoutLabel:null};break;case 2:t={wednesdayWorkoutId:null,wednesdayWorkoutLabel:null};break;case 3:t={thursdayWorkoutId:null,thursdayWorkoutLabel:null};break;case 4:t={fridayWorkoutId:null,fridayWorkoutLabel:null};break;case 5:t={saturdayWorkoutId:null,saturdayWorkoutLabel:null};break;case 6:t={sundayWorkoutId:null,sundayWorkoutLabel:null};break}V(this.plan.id,t).then(()=>{this.loadPlanWorkouts()}).catch(W=>{Q("Une erreur est survenue lors du retrait de votre entra\xEEnement au programme"),this.loadPlanWorkouts()})},selectWorkout(e){let t={};if(!e.id&&e.label)switch(this.indexToAddWorkout){case 0:t={mondayWorkoutLabel:e.label};break;case 1:t={tuesdayWorkoutLabel:e.label};break;case 2:t={wednesdayWorkoutLabel:e.label};break;case 3:t={thursdayWorkoutLabel:e.label};break;case 4:t={fridayWorkoutLabel:e.label};break;case 5:t={saturdayWorkoutLabel:e.label};break;case 6:t={sundayWorkoutLabel:e.label};break}else switch(this.indexToAddWorkout){case 0:t={mondayWorkoutId:e.id};break;case 1:t={tuesdayWorkoutId:e.id};break;case 2:t={wednesdayWorkoutId:e.id};break;case 3:t={thursdayWorkoutId:e.id};break;case 4:t={fridayWorkoutId:e.id};break;case 5:t={saturdayWorkoutId:e.id};break;case 6:t={sundayWorkoutId:e.id};break}V(this.plan.id,t).then(()=>{this.loadPlanWorkouts(),this.showAddPlan=!1,this.indexToAddWorkout=null}).catch(W=>{Q("Une erreur est survenue lors de l'ajout de votre entra\xEEnement au programme"),this.loadPlanWorkouts()})},resetForm(){this.customWorkout={label:""}}}},Re={class:"flex column"},Ue={key:0},Ge={class:"relative"},Me={class:"plan-template absolute"},Ke={class:"q-mb-sm text-center text-h5"},Ye={key:0,class:"invisible"},Je={class:"text-h6 text-center"},Ze={class:"text-h6 text-center"},$e={class:"text-h6 text-center color-primary flex flex-center"},Xe={class:"q-mb-lg"},et={class:"q-mb-sm text-center text-h5 workout-day no-hover"},tt={class:"text-h6 text-center"},at={class:"text-h6 text-center"},lt={class:"draggable-btn-container"},nt={key:1,class:"text-center"};function ot(e,t,W,m,r,s){const d=z("GymyHeader"),h=z("draggable");return y(),S("div",Re,[o(d,{text:"Entra\xEEnements<br/>"+W.plan.label},null,8,["text"]),r.planWorkouts&&r.planWorkouts.length>0?(y(),S("div",Ue,[f("div",Ge,[f("div",Me,[(y(!0),S(Y,null,J(r.planWorkouts,(n,c)=>(y(),S("div",{class:"q-mb-lg",key:n.id},[f("h2",Ke,T(s.getDayByIndex(c)),1),o(P,{flat:"",class:"flex-center column q-px-md plan-template__card relative"},{default:i(()=>[n.restDay?Ae("",!0):(y(),S("div",Ye,[o(p,{class:"gt-xs"},{default:i(()=>[f("div",Je,T(n.label),1)]),_:2},1024),o(p,{class:"q-pb-none lt-sm"},{default:i(()=>[f("div",Ze,T(n.label),1)]),_:2},1024),o(D,{horizontal:"",class:"lt-sm no-wrap q-pa-none"},{default:i(()=>[o(C,{flat:"",round:"",color:"negative",icon:"fa-solid fa-circle-minus"})]),_:1})])),o(p,{class:"absolute"},{default:i(()=>[f("div",$e,[H(" Repos "),o(C,{flat:"",round:"",color:"primary",inversed:"",icon:"add_circle",onClick:g=>s.remove(c)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)]))),128))]),o(h,{list:r.planWorkouts,class:"list-group","ghost-class":"ghost",itemKey:"idForList",handle:".draggable-btn",onEnd:s.onDragEnd,onStart:t[0]||(t[0]=n=>r.drag=!0)},{item:i(({element:n,index:c})=>[f("div",Xe,[f("h2",et,T(s.getDayByIndex(c)),1),n.restDay?(y(),A(P,{key:1,class:"flex-center column q-px-md plan-template__card restDay cursor-pointer",onClick:g=>s.showAddPlanFunction(c)},{default:i(()=>[o(p)]),_:2},1032,["onClick"])):(y(),A(P,{key:0,class:"flex-center column q-px-md"},{default:i(()=>[o(p,{class:"gt-xs"},{default:i(()=>[f("div",tt,T(n.label),1)]),_:2},1024),o(p,{class:"q-pb-none lt-sm"},{default:i(()=>[f("div",at,T(n.label),1)]),_:2},1024),o(D,{horizontal:"",class:"absolute-right gt-xs no-wrap"},{default:i(()=>[o(C,{flat:"",round:"",color:"negative",icon:"fa-solid fa-circle-minus",onClick:g=>s.remove(c)},null,8,["onClick"])]),_:2},1024),o(D,{horizontal:"",class:"lt-sm no-wrap q-pa-none"},{default:i(()=>[o(C,{flat:"",round:"",color:"negative",icon:"fa-solid fa-circle-minus",onClick:g=>s.remove(c)},null,8,["onClick"])]),_:2},1024),f("div",lt,[o(j,{class:Ce("draggable-btn "+(r.drag?"cursor-grabbing":"cursor-grab")),size:"sm",name:"menu"},null,8,["class"])])]),_:2},1024))])]),_:1},8,["list","onEnd"])])])):(y(),S("span",nt,"Aucun entra\xEEnement de disponible")),o(De,{modelValue:r.showAddPlan,"onUpdate:modelValue":t[2]||(t[2]=n=>r.showAddPlan=n),onHide:s.resetForm},{default:i(()=>[o(P,{class:"q-px-xs q-py-xs"},{default:i(()=>[o(p,{class:"text-h5 text-center"},{default:i(()=>[H(" Choisissez un entra\xEEnement ")]),_:1}),o(p,null,{default:i(()=>[(y(!0),S(Y,null,J(r.workouts,n=>(y(),A(P,{class:"cursor-pointer q-mb-md",key:n.id,onClick:c=>s.selectWorkout(n)},{default:i(()=>[o(p,{class:"text-h6 text-center"},{default:i(()=>[H(T(n.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),o(je,{icon:"sym_o_add_box",label:"D\xE9finir un entra\xEEnement personnalis\xE9",class:"q-mb-lg bordered-y"},{default:i(()=>[o(p,null,{default:i(()=>[o(Ee,{onSubmit:Pe(s.submitCustomWorkout,["prevent"]),class:"flex-center column"},{default:i(()=>[o(we,{name:"label",rounded:"",outlined:"",label:"Libell\xE9",class:"q-mb-md",type:"text",modelValue:r.customWorkout.label,"onUpdate:modelValue":t[1]||(t[1]=n=>r.customWorkout.label=n),"lazy-rules":"",rules:[n=>n.trim().length>2||"Veuillez renseigner minimum 3 caract\xE8res"]},null,8,["modelValue","rules"]),o(C,{color:"primary",label:"Enregistrer",type:"submit",disable:!s.customWorkoutFormValid,loading:r.customWorkoutFormLoading},null,8,["disable","loading"])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),o(D,{align:"center"},{default:i(()=>[te(o(C,{label:"Annuler",color:"negative"},null,512),[[Fe]])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])])}var st=ae(ze,[["render",ot],["__scopeId","data-v-9a609194"]]);const rt={name:"PlanPage",components:{PlanWorkouts:st},data(){return{plan:null}},created(){this.loadPlan()},methods:{loadPlan(){this.plan=Qe(this.$route.params.planId),this.plan||(Q("Impossible de charger la planification"),this.$router.push({name:"plans"}))}}};function it(e,t,W,m,r,s){const d=z("PlanWorkouts");return y(),A(d,{plan:r.plan},null,8,["plan"])}var yt=ae(rt,[["render",it]]);export{yt as default};
