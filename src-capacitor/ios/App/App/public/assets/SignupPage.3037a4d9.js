import{a as b,aC as g,aD as h,r as n,o as w,K as y,b as o,w as t,L as V,Y as u,Z as m,O as l,R as a,S as v,U as _,a2 as x,a3 as S}from"./index.1d7fae07.js";import{Q as z}from"./QForm.aefa9904.js";import{b as P}from"./authService.4b131235.js";import{t as N}from"./translatting.6793a7ea.js";import{o as C}from"./open-url.85ed7ed5.js";import{s as U,e as T}from"./notifyHelper.ce085942.js";import{G as I}from"./GymyHeader.dde444e5.js";import{f as E}from"./formatting.660d74af.js";const F={name:"SignupPage",components:{GymyHeader:I},setup(){return{openURL:C}},data(){return{form:{username:"",email:"",password:"",confirmPassword:"",defaultNumberOfSeries:g,restTime:h},loading:!1,validate:!0,showPassword:!1,showConfirmPassword:!1,siteUrl:"https://gymyapp.page.link/website"}},watch:{form:{handler(i){this.form.defaultNumberOfSeries=parseInt(i.defaultNumberOfSeries)},deep:!0,immediate:!0}},methods:{async onsubmit(){this.loading=!0,this.validate=await this.$refs.signupForm.validate(),this.validate?P(this.form.email.trim(),this.form.password.trim(),this.form.username.trim(),this.form.defaultNumberOfSeries,E().durationFormatFromString(this.form.restTime)).then(()=>{this.$router.push({name:"login"}),U("Un email de confirmation vous a \xE9t\xE9 envoy\xE9. Veuillez v\xE9rifier votre bo\xEEte de r\xE9ception pour activer votre compte.")}).catch(i=>{this.loading=!1,T(N().translateSignupError(i))}):this.loading=!1}}},O=i=>(x("data-v-660fddd0"),i=i(),S(),i),k={class:"flex flex-center column page"},q=O(()=>u("p",{class:"flex-end text-right signup-text"},"*Champ obligatoire",-1)),B={class:"q-mt-lg"};function Q(i,r,R,A,s,d){const p=n("GymyHeader"),f=n("router-link");return w(),y("div",k,[o(p,{text:"Inscription"}),o(z,{class:"flex flex-center column form signup-form",ref:"signupForm",onSubmit:r[8]||(r[8]=V(e=>d.onsubmit(),["prevent"]))},{default:t(()=>[o(l,{name:"username",rounded:"",outlined:"",label:"Nom d'utilisateur*",class:"q-mb-md signup-input","bg-color":"white",type:"text",modelValue:s.form.username,"onUpdate:modelValue":r[0]||(r[0]=e=>s.form.username=e),"lazy-rules":"",rules:[e=>e.trim().length>3||"Veuillez renseigner minimum 4 caract\xE8res"],"hide-bottom-space":""},null,8,["modelValue","rules"]),o(l,{name:"email",rounded:"",outlined:"",label:"Addresse email*",class:"q-mb-md signup-input","bg-color":"white",type:"email",inputmode:"email",modelValue:s.form.email,"onUpdate:modelValue":r[1]||(r[1]=e=>s.form.email=e),"lazy-rules":"",rules:[(e,c)=>c.email(e)||"Veuillez renseigner une adresse email valide"],"hide-bottom-space":""},null,8,["modelValue","rules"]),o(l,{name:"password",rounded:"",outlined:"",label:"Mot de passe*",class:"q-mb-md signup-input","bg-color":"white",type:s.showPassword?"text":"password",modelValue:s.form.password,"onUpdate:modelValue":r[3]||(r[3]=e=>s.form.password=e),"lazy-rules":"",hint:"8 caract\xE8res minimum, une majuscule, une minuscule, un chiffre et un caract\xE8re sp\xE9cial","hide-hint":"",rules:[e=>e.trim().length>0||"Veuillez remplir ce champ",e=>/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[\W]).{8,}/g.test(e)||"Veuillez renseigner un mot de passe contetant un caract\xE8re sp\xE9cial, une majuscule, une minuscule et un chiffre, et d'au moins 8 caract\xE8res"],"hide-bottom-space":""},{append:t(()=>[o(a,{name:s.showPassword?"visibility":"visibility_off",class:"cursor-pointer",color:"primary",onClick:r[2]||(r[2]=e=>s.showPassword=!s.showPassword)},null,8,["name"])]),_:1},8,["type","modelValue","rules"]),o(l,{name:"confirmPassword",rounded:"",outlined:"",label:"Confirmation du mot de passe*",class:"q-mb-md signup-input","bg-color":"white",type:s.showConfirmPassword?"text":"password",modelValue:s.form.confirmPassword,"onUpdate:modelValue":r[5]||(r[5]=e=>s.form.confirmPassword=e),"lazy-rules":"",rules:[e=>e.trim().length>0||"Veuillez remplir ce champ",e=>e===s.form.password||"Veuillez confirmer votre mot de passe"],"hide-bottom-space":""},{append:t(()=>[o(a,{name:s.showConfirmPassword?"visibility":"visibility_off",class:"cursor-pointer",color:"primary",onClick:r[4]||(r[4]=e=>s.showConfirmPassword=!s.showConfirmPassword)},null,8,["name"])]),_:1},8,["type","modelValue","rules"]),o(l,{name:"defaultNumberOfSeries",rounded:"",outlined:"",class:"q-mb-md signup-input",type:"number",inputmode:"numeric",modelValue:s.form.defaultNumberOfSeries,"onUpdate:modelValue":r[6]||(r[6]=e=>s.form.defaultNumberOfSeries=e),min:"1",rules:[e=>e!==null&&e!==""||"Veuillez remplir ce champ",e=>e>=1||"Veuillez renseigner une valeur positive sup\xE9rieur \xE0 0"],label:"Nombre de s\xE9ries par d\xE9faut*","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","rules"]),o(l,{name:"restTime",rounded:"",outlined:"",class:"q-mb-md signup-input",type:"text",modelValue:s.form.restTime,"onUpdate:modelValue":r[7]||(r[7]=e=>s.form.restTime=e),rules:[e=>/^-?[\d]?[\d]:[0-5]\d$/.test(e)||"Veuillez renseigner une dur\xE9e valide",e=>e!==null&&e!==""||"Veuillez remplir ce champ"],hint:"Format : 00:00",label:"Temps de repos*","lazy-rules":"","hide-bottom-space":""},null,8,["modelValue","rules"]),q,o(v,{label:"S'inscrire",type:"submit",class:_(`form-btn btn btn-${s.validate?"primary":"disabled"}`),disable:!s.validate,rounded:"",loading:s.loading,padding:"sm 50px",size:"20px"},null,8,["class","disable","loading"])]),_:1},512),u("p",B,[m(" Tu as d\xE9j\xE0 un compte ? "),o(f,{to:{name:"login"},class:"text-underline text-bold"},{default:t(()=>[m("Connecte toi")]),_:1})])])}var W=b(F,[["render",Q],["__scopeId","data-v-660fddd0"]]);export{W as default};
